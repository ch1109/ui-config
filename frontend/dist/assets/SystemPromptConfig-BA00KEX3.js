import{r as i,c as _,o as B,a as m,B as T,C as U,b as d,f as L,d as e,k as c,m as g,t as v,F as V,h as S,i as z,v as H,l as y,M as A,e as E,E as I,j as r,D as q}from"./index-Dp0wXQeI.js";import{_ as G,s as w}from"./_plugin-vue_export-helper-DINGzuyA.js";const Q={class:"system-prompt-page"},j={class:"page-content"},J={class:"content-grid"},$={class:"editor-section"},K={class:"panel-card model-card"},W={class:"card-header"},X={class:"card-body model-selector"},Y={class:"model-options"},Z=["value","disabled"],ee={class:"model-info"},te={class:"model-header"},ae={class:"model-name"},se={class:"model-provider"},oe={class:"model-desc"},le={key:0,class:"check-icon"},ne={class:"panel-card"},de={class:"card-header"},re={class:"card-actions"},ie=["disabled"],ce=["disabled"],ve={key:0,class:"btn-spinner"},pe={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ue={class:"card-body"},me={class:"editor-container"},he=["disabled"],fe={class:"editor-footer"},_e={class:"count"},ge={class:"status-hints"},we={key:0,class:"hint warning"},Me={key:1,class:"hint error"},ke={class:"tips-section"},be={class:"panel-card tips-card"},ye={class:"card-body"},Ce={class:"tips-list"},xe={class:"tip-text"},p=1e4,Be=100,Le={__name:"SystemPromptConfig",setup(Ve){const o=i(""),h=i(""),l=i(!1);i(null);const n=i("glm-4.6v"),M=i("glm-4.6v"),C=i([{id:"glm-4.6v",name:"GLM-4.6V",description:"æ™ºè°± AI è§†è§‰æ¨¡å‹ï¼Œå›¾åƒç†è§£èƒ½åŠ›å¼ºï¼Œæ”¯æŒä¸­è‹±æ–‡",provider:"æ™ºè°± AI"},{id:"qwen2.5-vl-7b",name:"Qwen2.5-VL-7B",description:"é€šä¹‰åƒé—®è§†è§‰æ¨¡å‹ï¼Œæœ¬åœ°éƒ¨ç½²ç‰ˆæœ¬ï¼Œå“åº”é€Ÿåº¦å¿«",provider:"é˜¿é‡Œäº‘ / æœ¬åœ°éƒ¨ç½²"}]),N=["æ˜ç¡®æè¿°æœŸæœ›çš„è¾“å‡ºæ ¼å¼ï¼ˆJSON Schemaï¼‰","åˆ—å‡ºéœ€è¦è¯†åˆ«çš„å…ƒç´ ç±»å‹å’Œå‘½åè§„åˆ™","è¯´æ˜ä½•æ—¶éœ€è¦æå‡ºæ¾„æ¸…é—®é¢˜","å®šä¹‰ç½®ä¿¡åº¦çš„è¯„ä¼°æ ‡å‡†"],u=_(()=>o.value.length),f=_(()=>u.value<=p),k=_(()=>o.value!==h.value||n.value!==M.value),P=_(()=>({warning:u.value>p*.9&&u.value<=p,error:u.value>p}));B(async()=>{l.value=!0;try{const a=await w.getCurrent();o.value=a.prompt_content,h.value=a.prompt_content,n.value=a.selected_model||"glm-4.6v",M.value=a.selected_model||"glm-4.6v";try{const t=await w.getModels();t.models&&t.models.length>0&&(C.value=t.models)}catch(t){console.warn("Failed to load models list, using defaults:",t)}}catch(a){console.error("Failed to load prompt:",a),m.error("åŠ è½½æç¤ºè¯å¤±è´¥")}finally{l.value=!1}});const D=async()=>{m.info(`å·²é€‰æ‹© ${n.value==="glm-4.6v"?"GLM-4.6V":"Qwen2.5-VL-7B"} æ¨¡å‹ï¼Œè¯·ç‚¹å‡»ä¿å­˜æŒ‰é’®ç¡®è®¤`)},F=()=>{o.value.length>p&&(o.value=o.value.slice(0,p))},O=async()=>{var a,t;if(f.value){l.value=!0;try{await w.update({prompt_content:o.value,selected_model:n.value}),h.value=o.value,M.value=n.value,m.success("ä¿å­˜æˆåŠŸ")}catch(s){m.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"ä¿å­˜å¤±è´¥")}finally{l.value=!1}}},R=()=>{A.confirm({title:"æ¢å¤é»˜è®¤",icon:E(I),content:"ç¡®å®šè¦æ¢å¤ä¸ºé»˜è®¤æ¨¡æ¿å—ï¼Ÿå½“å‰å†…å®¹å°†è¢«è¦†ç›–ã€‚",onOk:async()=>{l.value=!0;try{const a=await w.reset();o.value=a.prompt_content,h.value=a.prompt_content,m.success("å·²æ¢å¤é»˜è®¤é…ç½®")}catch{m.error("æ¢å¤å¤±è´¥")}finally{l.value=!1}}})};T((a,t,s)=>{if(k.value)return A.confirm({title:"æœªä¿å­˜çš„æ›´æ”¹",icon:E(I),content:"æ‚¨æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ",okText:"ç¦»å¼€",cancelText:"å–æ¶ˆ",onOk(){s()},onCancel(){}}),!1;s()});const x=a=>{k.value&&(a.preventDefault(),a.returnValue="")};return B(()=>{window.addEventListener("beforeunload",x)}),U(()=>{window.removeEventListener("beforeunload",x)}),(a,t)=>(r(),d("div",Q,[t[15]||(t[15]=L('<header class="page-header" data-v-27daf938><div class="header-content" data-v-27daf938><div class="title-group" data-v-27daf938><h1 data-v-27daf938><span class="icon-wrapper" data-v-27daf938><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-27daf938><path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" data-v-27daf938></path></svg></span> æç¤ºè¯é…ç½® </h1><p class="subtitle" data-v-27daf938>é…ç½® VL æ¨¡å‹çš„ç³»ç»Ÿæç¤ºè¯ï¼Œå½±å“é¡µé¢è§£ææ•ˆæœ</p></div></div></header>',1)),e("div",j,[e("div",J,[e("div",$,[e("div",K,[e("div",W,[t[2]||(t[2]=e("h3",null,[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})]),c(" è§†è§‰æ¨¡å‹é€‰æ‹© ")],-1)),e("span",{class:g(["model-badge",n.value==="glm-4.6v"?"badge-zhipu":"badge-qwen"])},v(n.value==="glm-4.6v"?"æ™ºè°± AI":"æœ¬åœ°éƒ¨ç½²"),3)]),e("div",X,[e("div",Y,[(r(!0),d(V,null,S(C.value,s=>(r(),d("label",{key:s.id,class:g(["model-option",{selected:n.value===s.id}])},[z(e("input",{type:"radio",value:s.id,"onUpdate:modelValue":t[0]||(t[0]=b=>n.value=b),onChange:D,disabled:l.value},null,40,Z),[[q,n.value]]),e("div",ee,[e("div",te,[e("span",ae,v(s.name),1),e("span",se,v(s.provider),1)]),e("p",oe,v(s.description),1)]),n.value===s.id?(r(),d("span",le,[...t[3]||(t[3]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("path",{d:"M20 6L9 17l-5-5"})],-1)])])):y("",!0)],2))),128))])])]),e("div",ne,[e("div",de,[t[7]||(t[7]=e("h3",null,[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M16 18l6-6-6-6M8 6l-6 6 6 6"})]),c(" System Prompt ")],-1)),e("div",re,[e("button",{class:"action-btn secondary",onClick:R,disabled:l.value},[...t[4]||(t[4]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15"})],-1),c(" æ¢å¤é»˜è®¤ ",-1)])],8,ie),e("button",{class:"action-btn primary",onClick:O,disabled:!k.value||l.value||!f.value},[l.value?(r(),d("span",ve)):(r(),d("svg",pe,[...t[5]||(t[5]=[e("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"},null,-1),e("path",{d:"M17 21v-8H7v8M7 3v5h8"},null,-1)])])),t[6]||(t[6]=c(" ä¿å­˜ ",-1))],8,ce)])]),e("div",ue,[e("div",me,[z(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value=s),class:g(["prompt-editor",{error:!f.value}]),disabled:l.value,placeholder:"è¯·è¾“å…¥ System Prompt...",onInput:F},null,42,he),[[H,o.value]]),e("div",fe,[e("div",{class:g(["char-counter",P.value])},[e("span",_e,v(u.value),1),t[8]||(t[8]=e("span",{class:"separator"},"/",-1)),e("span",{class:"max"},v(p)),t[9]||(t[9]=e("span",{class:"label"},"å­—ç¬¦",-1))],2),e("div",ge,[u.value<Be?(r(),d("div",we,[...t[10]||(t[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),c(" å»ºè®®ä¸å°‘äº 100 å­—ç¬¦ä»¥æå‡è§£ææ•ˆæœ ",-1)])])):y("",!0),f.value?y("",!0):(r(),d("div",Me,[...t[11]||(t[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M15 9l-6 6M9 9l6 6"})],-1),c(" å·²è¾¾åˆ°æœ€å¤§å­—ç¬¦é™åˆ¶ ",-1)])]))])])])])])]),e("aside",ke,[e("div",be,[t[13]||(t[13]=e("div",{class:"card-header"},[e("h3",null,[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),c(" ç¼–å†™æç¤º ")])],-1)),e("div",ye,[e("ul",Ce,[(r(),d(V,null,S(N,(s,b)=>e("li",{key:b,class:"tip-item"},[t[12]||(t[12]=e("span",{class:"tip-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[e("path",{d:"M20 6L9 17l-5-5"})])],-1)),e("span",xe,v(s),1)])),64))])])]),t[14]||(t[14]=L('<div class="panel-card templates-card" data-v-27daf938><div class="card-header" data-v-27daf938><h3 data-v-27daf938><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-27daf938><rect x="3" y="3" width="18" height="18" rx="2" data-v-27daf938></rect><path d="M3 9h18M9 21V9" data-v-27daf938></path></svg> å¿«é€Ÿæ¨¡æ¿ </h3></div><div class="card-body" data-v-27daf938><div class="template-items" data-v-27daf938><button class="template-btn" data-v-27daf938><span class="template-icon" data-v-27daf938>ğŸ“„</span><span class="template-name" data-v-27daf938>åŸºç¡€æ¨¡æ¿</span></button><button class="template-btn" data-v-27daf938><span class="template-icon" data-v-27daf938>ğŸ¯</span><span class="template-name" data-v-27daf938>ç²¾å‡†è¯†åˆ«</span></button><button class="template-btn" data-v-27daf938><span class="template-icon" data-v-27daf938>ğŸ”</span><span class="template-name" data-v-27daf938>è¯¦ç»†åˆ†æ</span></button></div></div></div>',1))])])])]))}},Ae=G(Le,[["__scopeId","data-v-27daf938"]]);export{Ae as default};
